"use strict";(self.webpackChunkhome=self.webpackChunkhome||[]).push([["173"],{4511:function(e,t,s){var a=s(7250),l=s(6623),r=s(8540);s(7898);var n=s(9475),i=s(4537),o=s.n(i),c=s(9149),d=s(9734);let m=()=>{let{setIsLoggenedIn:e,setName:t,setAccessToken:s}=(0,r.useUserState)(),l=(0,n.s0)();return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"w-full max-w-md bg-white p-8 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Login"}),(0,a.jsx)(c.J9,{initialValues:{email:"",password:""},onSubmit:async a=>{console.log("Form data",a);try{let r=await d.Z.post("https://nodejstarter.onrender.com/v1/auth/login",a);r.data.success&&(localStorage.setItem("token",r.data.data.accessToken),e(!0),t(a.email),l("/user"),s(r.data.data.accessToken))}catch(e){}},children:e=>{let{handleSubmit:t}=e;return(0,a.jsxs)(c.l0,{onSubmit:t,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)(c.gN,{name:"email",type:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsx)(c.gN,{name:"password",type:"password",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:"Submit"})]})}})]})})},x=()=>{let[e,t]=(0,i.useState)({name:"John Doe",email:"johndoe@example.com",profilePic:"https://i.pravatar.cc/150?img=3"});return(0,i.useEffect)(()=>{(async()=>{let e=await d.Z.get("https://nodejstarter.onrender.com/v1/users/user",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data.success&&t(e.data.data)})()},[]),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-10 px-6",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto bg-white shadow-lg rounded-xl p-8 flex flex-col md:flex-row items-center gap-10",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("img",{src:e.profilePic,alt:"Profile",className:"w-40 h-40 rounded-full object-cover shadow-md border-2 border-indigo-500"})}),(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"User Profile"}),(0,a.jsx)(c.J9,{initialValues:e,onSubmit:async e=>{await d.Z.patch("https://nodejstarter.onrender.com/v1/users/user",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})},enableReinitialize:!0,children:e=>{let{handleSubmit:t}=e;return(0,a.jsxs)(c.l0,{onSubmit:t,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Name"}),(0,a.jsx)(c.gN,{name:"name",className:"text-lg font-medium text-gray-900 bg-transparent focus:outline-none border-none px-0 py-1"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Email"}),(0,a.jsx)(c.gN,{name:"email",disabled:!0,className:"text-lg font-medium text-gray-500 bg-gray-100 px-3 py-2 rounded-md cursor-not-allowed"})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("button",{type:"submit",className:"bg-indigo-600 text-white font-medium px-6 py-2 rounded-md hover:bg-indigo-700 transition",children:"Update Profile"})})]})}})]})]})})};var h=s(3654),u=s(1150);s(4695);let g=h.Ry().shape({title:h.Z_().min(5,"Title must be at least 5 characters").required("Title is required"),description:h.Z_().min(20,"Description must be at least 20 characters").required("Description is required"),image:h.Z_().url("Must be a valid URL").required("Image URL is required")}),b=e=>{let{mode:t="create"}=e,{id:s}=(0,n.UO)(),l=(0,n.s0)(),[r,o]=(0,i.useState)({title:"",description:"",image:""});return(0,i.useEffect)(()=>{"create"!=t&&d.Z.get(`https://nodejstarter.onrender.com/v1/blogs/user/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{o(e.data.data)}).catch(e=>{console.error("Error fetching blog:",e)})},[s]),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-lg bg-white shadow-md rounded-lg p-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:["$","create"===t?"Create":"Update"," a Blog"]}),(0,a.jsx)(c.J9,{initialValues:r,validationSchema:g,enableReinitialize:!0,onSubmit:async(e,a)=>{let{resetForm:r}=a;try{let a;(a="create"===t?await d.Z.post("https://nodejstarter.onrender.com/v1/blogs/user",e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}):await d.Z.patch(`https://nodejstarter.onrender.com/v1/blogs/user/${s}`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.success&&(console.log("Blog created:",a.data.data),l("/blog"),r())}catch(e){console.error("Error creating blog:",e)}},children:e=>{let{handleSubmit:s,setFieldValue:l,values:r}=e;return(0,a.jsxs)(c.l0,{onSubmit:s,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 mb-1",children:"Title"}),(0,a.jsx)(c.gN,{name:"title",type:"text",className:"w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter blog title"}),(0,a.jsx)(c.Bc,{name:"title",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 mb-1",children:"Description"}),(0,a.jsx)(u.Z,{value:r.description,onChange:e=>l("description",e),className:"bg-white",theme:"snow"}),(0,a.jsx)(c.Bc,{name:"description",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 mb-1",children:"Image URL"}),(0,a.jsx)(c.gN,{name:"image",type:"text",className:"w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Paste image link"}),(0,a.jsx)(c.Bc,{name:"image",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition duration-200",children:["create"==t?"Create":"Update"," Blog"]})})]})}})]})})},p=()=>{let e=(0,r.useUserState)(e=>e.name),t=(0,r.useUserState)(e=>e.Logout),s=(0,n.s0)(),[l,o]=(0,i.useState)(!1),c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("nav",{className:"flex items-center justify-between px-8 py-4 fixed top-0 left-0 right-0 bg-white shadow-md z-50",children:[(0,a.jsx)("span",{onClick:()=>s("/blog"),className:"text-xl font-semibold text-gray-800 hover:text-blue-600 transition-colors cursor-pointer",children:"\uD83D\uDCDD Blogs"}),(0,a.jsxs)("div",{className:"relative flex items-center gap-3 text-gray-700",ref:c,children:[(0,a.jsx)("span",{className:"font-medium",children:e}),(0,a.jsx)("div",{onClick:()=>o(e=>!e),className:"w-9 h-9 bg-blue-500 text-white rounded-full flex items-center justify-center uppercase font-bold cursor-pointer",children:(null==e?void 0:e[0])||"U"}),l&&(0,a.jsxs)("div",{className:"absolute right-0 top-14 bg-white border rounded-md shadow-lg w-40 py-2 z-50",children:[(0,a.jsx)("button",{onClick:()=>{s("/user"),o(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm text-gray-800",children:"Profile"}),(0,a.jsx)("button",{onClick:()=>{t(),s("/login")},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm text-red-600",children:"Logout"})]})]})]})},j=()=>{let e=localStorage.getItem("token"),{setAccessToken:t,setIsLoggenedIn:s,setName:l}=(0,r.useUserState)(),[c,m]=o().useState(!1);return console.log(e),(0,i.useEffect)(()=>{e||(window.location.href="/login"),async function(){m(!0);try{let a=await d.Z.get("https://nodejstarter.onrender.com/v1/auth/verify",{headers:{Authorization:`Bearer ${e}`}});a.data.success?(t(e),l(a.data.data.email),s(!0)):window.location.href="/login"}catch(e){}finally{m(!1)}}()},[]),c?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{children:[(0,a.jsx)(p,{}),(0,a.jsx)("section",{className:"mt-[100px] h-[calc(100vh-100px)]",children:(0,a.jsx)(n.j3,{})})]})},f=e=>{let{image:t,title:s,description:l,createdAt:r,user:n}=e;return(0,a.jsxs)("section",{className:"max-w-4xl mx-auto bg-white p-8 mt-12 shadow-lg rounded-lg",children:[t&&(0,a.jsx)("img",{src:t,alt:s,className:"w-full h-80 object-cover rounded-md mb-8"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:s}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["By ",(0,a.jsx)("strong",{children:null==n?void 0:n.name})," \xb7"," ",new Date(r).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})]})]}),(0,a.jsx)("article",{className:"prose prose-lg prose-indigo max-w-none",children:(0,a.jsx)(u.Z,{readOnly:!0,theme:"bubble",value:l})})]})},y=()=>{let{id:e}=(0,n.UO)(),[t,s]=(0,i.useState)(null),[l,r]=(0,i.useState)(!0);(0,i.useEffect)(()=>{d.Z.get(`https://nodejstarter.onrender.com/v1/blogs/user/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{s(e.data.data),r(!1)}).catch(e=>{console.error("Error fetching blog:",e),r(!1)})},[e]);let o=(0,n.s0)();if(l)return(0,a.jsx)("div",{className:"text-center mt-10",children:"Loading..."});if(!t)return(0,a.jsx)("div",{className:"text-center mt-10",children:"Blog not found."});let{title:c,description:m,image:x,user:h,createdAt:u}=t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-end px-3 py-2",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:()=>o("/blog/edit/"+e),children:"Edit Blog"})}),(0,a.jsx)(f,{image:x,title:c,description:m,createdAt:u,user:h})]})},v=e=>{let{blog:t,handleClick:s=()=>{}}=e,{title:l,description:r,image:n,user:o,createdAt:c}=t,[d,m]=(0,i.useState)(!1);return(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg cursor-pointer overflow-hidden max-w-md w-full mx-auto flex flex-col",onClick:s,children:[(0,a.jsx)("div",{className:"h-48 bg-gray-200 flex items-center justify-center text-gray-500 text-lg",children:n?(0,a.jsx)("img",{src:n,alt:l,className:"object-cover w-full h-full"}):"No Image"}),(0,a.jsxs)("div",{className:"p-5 flex flex-col flex-1",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:l}),(0,a.jsxs)("div",{className:"text-gray-600 text-sm mb-4",children:[d?(0,a.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:r}}):(0,a.jsx)("p",{children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,s=document.createElement("div");s.innerHTML=e;let a=s.textContent||s.innerText||"";return a.length>t?a.slice(0,t)+"...":a}(r)}),r.length>150&&(0,a.jsx)("button",{className:"mt-2 text-blue-600 hover:underline text-sm font-medium",onClick:()=>m(e=>!e),children:d?"Show Less":"Read More"})]}),(0,a.jsxs)("div",{className:"flex mt-auto items-center justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["By: ",(0,a.jsx)("strong",{children:null==o?void 0:o.name})]}),(0,a.jsx)("span",{children:new Date(c).toLocaleDateString()})]})]})]})},N=()=>{let[e,t]=(0,i.useState)([]),s=localStorage.getItem("token"),l=(0,n.s0)();return(0,i.useEffect)(()=>{!async function(){try{let e=await d.Z.get("https://nodejstarter.onrender.com/v1/blogs/user",{headers:{Authorization:`Bearer ${s}`}});e.data.success&&t(e.data.data)}catch(e){console.error("Failed to fetch blogs:",e)}}()},[]),console.log(e),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex justify-end px-3 py-2",children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:()=>l("create"),children:"Create Blog"})}),(0,a.jsx)("div",{className:"grid gap-3 [grid-template-columns:repeat(auto-fill,minmax(200px,1fr))]",children:null==e?void 0:e.map(e=>(0,a.jsx)(v,{blog:e,handleClick:()=>{l(`/blog/${e._id}`)}}))})]})},w=()=>{let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{try{let e=await d.Z.get("https://nodejstarter.onrender.com/v1/blogs");e.data.success&&t(e.data.data)}catch(e){}})()},[]),(0,a.jsxs)("div",{className:"bg-gray-50 min-h-screen text-gray-800 flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white shadow-md",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-indigo-600",children:"MyBlog"}),(0,a.jsx)("nav",{children:(0,a.jsx)(n.rU,{to:"/login",className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2 rounded-lg text-sm font-semibold transition",children:"Login"})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col justify-center bg-white",children:[" ",(0,a.jsxs)("div",{className:"bg-gray-50 min-h-screen pt-24 px-4 md:px-12",children:[(0,a.jsxs)("section",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:"Recommended for You"}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,a.jsx)(v,{blog:e,handleClick:()=>window.location.href=`/${e._id}`},e.id)):(0,a.jsx)("p",{className:"text-gray-500",children:"No recommendations yet."})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-6",children:"Latest Posts"}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,a.jsx)(v,{blog:e,handleClick:()=>window.location.href=`/${e._id}`},e.id)):(0,a.jsx)("p",{className:"text-gray-500",children:"No blogs available."})})]})]})]})]})},S=()=>{let[e,t]=(0,i.useState)({title:"",description:"",image:"",user:void 0,createdAt:null}),{id:s}=(0,n.UO)();return(0,i.useEffect)(()=>{(async()=>{try{let e=await d.Z.get(`https://nodejstarter.onrender.com/v1/blogs/${s}`);e.data.success&&t(e.data.data)}catch(e){}})()},[]),(0,a.jsx)("div",{children:(0,a.jsx)(f,{createdAt:e.createdAt,title:e.title,description:e.description,image:e.image,user:e.user})})},k=()=>(0,n.V$)([{path:"/",element:(0,a.jsx)(n.j3,{}),children:[{path:"",element:(0,a.jsx)(w,{})},{path:":id",element:(0,a.jsx)(S,{})}]},{path:"/login",element:(0,a.jsx)(m,{})},{path:"/",element:(0,a.jsx)(j,{}),children:[{path:"user",element:(0,a.jsx)(x,{})},{path:"blog",element:(0,a.jsx)(n.j3,{}),children:[{path:"",element:(0,a.jsx)(N,{})},{path:"create",element:(0,a.jsx)(b,{})},{path:":id",element:(0,a.jsx)(y,{})},{path:"edit/:id",element:(0,a.jsx)(b,{mode:"edit"})}]}]}]);l.createRoot(document.getElementById("app")).render((0,a.jsx)(()=>((0,r.useUserState)(e=>e.name),(0,a.jsx)(n.VK,{children:(0,a.jsx)(k,{})})),{}))},7898:function(e,t,s){e.exports={}}}]);
//# sourceMappingURL=173.js.map